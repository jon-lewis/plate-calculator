<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Plates</title>
  
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
  <script src="platecalculator.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/riot/3.13.0/riot+compiler.min.js"></script>
</head>
<body>

<div class="ui centered grid container">
    <div class="two column centered row">
        <div class="column">                     
            <div class="ui right labeled input">
                <input id="weight" type="number" step="2.5" placeholder="350"/>
                <select class="ui compact dropdown label">
                    <option selected value="lbs">lbs</option>
                    <option value="kgs">kgs</option>
                </select>
            </div>
        </div>
        <div class="four wide column">
            <div id="plates"></div>
            <div id="actual-weight"></div>
        </div>
    </div>
</div>

<script>
  
$(document).ready(function() {
    // Init all dropdowns for semantic ui
    $('.ui.dropdown').dropdown();

    let calculator = new PlateCalculator();

    $('#weight').change(function(e) {
        var weight = $('#weight').val();
        var plates = calculator.getPlates(weight, [45,35,25,10,5,2.5]);
        console.log(plates);
        $('#plates').html("Plates needed: " + plates.toString());

        let total = 0;
        plates.forEach(p => total += 2*p);
        $('#actual-weight').html("Actual weight: " + total);
    });

    riot.mount("*");
});
</script>
</body>
</html>